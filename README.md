# KidsPG避けまくり中ゲーム

## 概要

『KidsPG避けまくり中ゲーム』は、Electron、React、PixiJSをベースに開発された、オフラインイベント向けのインタラクティブな2Dゲームアプリケーションです。プレイヤーはカメラで顔写真を撮影し、AIで加工されたユニークなキャラクターでゲームをプレイできます。

## 主な機能

-   **カメラ撮影**: WebRTCを利用してプレイヤーの顔写真を撮影します。
-   **AI画像加工**: ローカルで動作するComfyUIと連携し、撮影した写真をAIでユニークな画像に変換します。 **(実装予定)**
-   **2D避けゲー**: PixiJSによる軽快な2Dゲームエンジンで、3レーンのシンプルな避けゲームを楽しめます。
-   **スコアとランキング**: プレイ結果はローカルに保存され、n8nによってランキングが自動生成されます。外部モニターにリアルタイムで表示することも可能です。 **(実装予定)**
-   **記念カード生成**: ゲーム終了後、スコアやレベル、ユニークな二つ名が入った記念カードが生成されます。 **(実装予定)**

## 技術スタック

本プロジェクトは、以下の主要技術で構成されています。

| 区分 | 技術 |
| :--- | :--- |
| **デスクトップアプリ** | Electron, React, TypeScript, TailwindCSS |
| **ゲームエンジン** | PixiJS |
| **画像処理** | WebRTC, ComfyUI API, Canvas API |
| **データ管理・自動化** | Node.js, n8n |

詳細な技術選定やシステム構成については、`docs/tech_stack.md` をご参照ください。

## 前提条件

このアプリケーションを全ての機能を含めて利用するには、以下のソフトウェアがローカル環境にインストールされている必要があります。

-   Node.js (~22.x)
-   Python (~3.13)
-   [ComfyUI](https://github.com/comfyanonymous/ComfyUI) （AI画像加工用）
-   [n8n](https://n8n.io/) （ランキング自動生成用）

## 開発

### 環境構築

1.  リポジトリをクローンします。
2.  依存パッケージをインストールします。
    ```bash
    npm install
    ```

### 開発モードでの実行

```bash
npm run electron:dev
```

このコマンドで開発モードを開始できます。ホットリロードが有効になり、ファイルの変更が自動で反映されます。

その他の実行・ビルドコマンドについては、[アプリケーションの実行とビルド](#アプリケーションの実行とビルド)セクションを参照してください。

### コードスタイル

このプロジェクトのコードスタイルは、**Prettier**（フォーマッター）と**ESLint**（リンター）によって管理されています。開発に参加する際は、以下のコマンドを利用してコードの品質を維持してください。

```bash
# Lintエラーのチェック
npm run lint

# Lintエラーのチェックと自動修正
npm run lint:fix

# コードの自動整形
npm run format
```

## アプリケーションの実行とビルド

本番用のアプリケーションをビルド、実行、パッケージ化するためのコマンドです。

-   `npm run build`: 本番用にアプリケーションをビルドし、`dist`ディレクトリに出力します。
-   `npm run electron`: ビルド済みのアプリケーション（`dist`ディレクトリが必須）を起動します。
-   `npm start`: `npm run build` を実行してから `npm run electron` を実行する、最も一般的な起動コマンドです。
-   `npm run dist`: アプリケーションをビルドし、配布用のパッケージを `release` フォルダに作成します。

### 通常実行

```bash
npm start
```

### 配布パッケージのビルド

```bash
npm run dist
```

特定のプラットフォーム向けにビルドすることも可能です。

-   **Windows**: `npm run dist:win`
-   **macOS**: `npm run dist:mac`
-   **Linux**: `npm run dist:linux`

## ライセンス

このプロジェクトは [MIT License](LICENSE) の下で公開されています。

## 作者

**KidsPG Team** (`info@kidspg.com`)